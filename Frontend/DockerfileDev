FROM node:18-alpine3.15

COPY . .
ENV NODE_ENV=production
RUN npm install --legacy-peer-deps --quiet --also=dev
ENV PORT=80
ENV CHOKIDAR_USEPOLLING=true
EXPOSE 80
CMD ["npm", "start"]